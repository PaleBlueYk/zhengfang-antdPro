(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{CyIy:function(e,t,a){e.exports={main:"antd-pro-pages-user-login-style-main",icon:"antd-pro-pages-user-login-style-icon",other:"antd-pro-pages-user-login-style-other",register:"antd-pro-pages-user-login-style-register",captcha:"antd-pro-pages-user-login-style-captcha"}},DdhY:function(e,t,a){e.exports={login:"antd-pro-pages-user-login-components-login-index-login",getCaptcha:"antd-pro-pages-user-login-components-login-index-getCaptcha",icon:"antd-pro-pages-user-login-components-login-index-icon",other:"antd-pro-pages-user-login-components-login-index-other",register:"antd-pro-pages-user-login-components-login-index-register",prefixIcon:"antd-pro-pages-user-login-components-login-index-prefixIcon",submit:"antd-pro-pages-user-login-components-login-index-submit"}},NGMh:function(e,t,a){"use strict";a.r(t);a("sRBo");var n=a("kaz8"),r=(a("5NDa"),a("5rEg")),c=(a("5Dmo"),a("3S7+")),o=(a("fOrg"),a("+KLJ")),s=a("k1fw"),l=a("fWQN"),i=a("mtLc"),u=a("Nsem"),p=a("oZsa"),m=a("yKVA"),g=a("q1tI"),f=a.n(g),d=a("9kvl"),h=(a("y8nQ"),a("Vl3Y")),b=(a("Znn+"),a("ZTPi")),v=a("oBTY"),C=a("tJVT"),y=a("yUgw"),E=a("TSYQ"),O=a.n(E),j=Object(g["createContext"])({}),x=j,w=(a("14J3"),a("BMrR")),N=(a("+L6B"),a("2/Rp")),S=(a("jCWc"),a("kPKH")),T=a("0Owb"),P=a("WmNS"),k=a.n(P),I=(a("miYZ"),a("tsqr")),L=a("9og8"),U=a("PpiC"),q=a("BGR+"),D=a("anxO"),R=a("cJ7L"),V=a("MGYb"),z=a("FQ2w"),A=a("aV1t"),B=a("cGnJ"),M=a("DdhY"),J=a.n(M),Y={UserName:{props:{size:"large",id:"userName",prefix:f.a.createElement(R["a"],{style:{color:"#1890ff"},className:J.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:f.a.createElement(V["a"],{className:J.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:f.a.createElement(z["a"],{className:J.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},CaptCha:{props:{size:"large",prefix:f.a.createElement(A["a"],{className:J.a.prefixIcon}),placeholder:"\u9a8c\u8bc1\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801!"}]}},Captcha:{props:{size:"large",prefix:f.a.createElement(B["a"],{className:J.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},G=h["a"].Item,K=function(e){var t=e.onChange,a=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,c=e.rules,o={rules:c||r.rules};return t&&(o.onChange=t),a&&(o.initialValue=a),o},Q=function(e){var t=Object(g["useState"])(e.countDown||0),a=Object(C["a"])(t,2),n=a[0],c=a[1],o=Object(g["useState"])(!1),s=Object(C["a"])(o,2),l=s[0],i=s[1],u=(e.onChange,e.customProps),p=(e.defaultValue,e.rules,e.name),m=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),d=(e.tabUtil,Object(U["a"])(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),h=Object(g["useCallback"])(function(){var e=Object(L["a"])(k.a.mark((function e(t){var a;return k.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(D["b"])(t);case 2:if(a=e.sent,!1!==a){e.next=5;break}return e.abrupt("return");case 5:I["a"].success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01\u9a8c\u8bc1\u7801\u4e3a\uff1a1234"),i(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);if(Object(g["useEffect"])((function(){var t=0,a=e.countDown;return l&&(t=window.setInterval((function(){c((function(e){return e<=1?(i(!1),clearInterval(t),a||60):e-1}))}),1e3)),function(){return clearInterval(t)}}),[l]),!p)return null;var b=K(e),v=d||{};if("Captcha"===m){var y=Object(q["a"])(v,["onGetCaptcha","countDown"]);return f.a.createElement(G,{shouldUpdate:!0,noStyle:!0},(function(e){var t=e.getFieldValue;return f.a.createElement(w["a"],{gutter:8},f.a.createElement(S["a"],{span:16},f.a.createElement(G,Object(T["a"])({name:p},b),f.a.createElement(r["a"],Object(T["a"])({},u,y)))),f.a.createElement(S["a"],{span:8},f.a.createElement(N["a"],{disabled:l,className:J.a.getCaptcha,size:"large",onClick:function(){var e=t("mobile");h(e)}},l?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))}))}return f.a.createElement(G,Object(T["a"])({name:p},b),f.a.createElement(r["a"],Object(T["a"])({},u,v)))},F={};Object.keys(Y).forEach((function(e){var t=Y[e];F[e]=function(a){return f.a.createElement(x.Consumer,null,(function(n){return f.a.createElement(Q,Object(T["a"])({customProps:t.props,rules:t.rules},a,{type:e},n,{updateActive:n.updateActive}))}))}}));var W=F,Z=h["a"].Item,H=function(e){var t=e.className,a=Object(U["a"])(e,["className"]),n=O()(J.a.submit,t);return f.a.createElement(Z,null,f.a.createElement(N["a"],Object(T["a"])({size:"large",className:n,type:"primary",htmlType:"submit"},a)))},$=H,X=b["a"].TabPane,_=function(){var e=0;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(t).concat(e)}}(),ee=function(e){Object(g["useEffect"])((function(){var t=_("login-tab-"),a=e.tabUtil;a&&a.addTab(t)}),[]);var t=e.children;return f.a.createElement(X,e,e.active&&t)},te=function(e){return f.a.createElement(x.Consumer,null,(function(t){return f.a.createElement(ee,Object(T["a"])({tabUtil:t.tabUtil},e))}))};te.typeName="LoginTab";var ae=te,ne=function(e){var t=e.className,a=Object(g["useState"])([]),n=Object(C["a"])(a,2),r=n[0],c=n[1],o=Object(g["useState"])({}),s=Object(C["a"])(o,2),l=s[0],i=s[1],u=Object(y["a"])("",{value:e.activeKey,onChange:e.onTabChange}),p=Object(C["a"])(u,2),m=p[0],d=p[1],E=[],j=[];return f.a.Children.forEach(e.children,(function(e){e&&("LoginTab"===e.type.typeName?E.push(e):j.push(e))})),f.a.createElement(x.Provider,{value:{tabUtil:{addTab:function(e){c([].concat(Object(v["a"])(r),[e]))},removeTab:function(e){c(r.filter((function(t){return t!==e})))}},updateActive:function(e){l&&(l[m]?l[m].push(e):l[m]=[e],i(l))}}},f.a.createElement("div",{className:O()(t,J.a.login)},f.a.createElement(h["a"],{form:e.from,onFinish:function(t){e.onSubmit&&e.onSubmit(t)}},r.length?f.a.createElement(f.a.Fragment,null,f.a.createElement(b["a"],{animated:!1,className:J.a.tabs,activeKey:m,onChange:function(e){d(e)}},E),j):e.children)))};ne.Tab=ae,ne.Submit=$,ne.CaptCha=W.CaptCha,ne.UserName=W.UserName,ne.Password=W.Password,ne.Mobile=W.Mobile;var re,ce,oe,se=ne,le=a("CyIy"),ie=a.n(le);function ue(e){return function(){var t,a=Object(p["a"])(e);if(pe()){var n=Object(p["a"])(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return Object(u["a"])(this,t)}}function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var me=se.Tab,ge=se.UserName,fe=se.Password,de=se.Submit,he=se.CaptCha,be=(re=Object(d["a"])((function(e){var t=e.login,a=e.global,n=e.loading;return{global:a,userLogin:t,submitting:n.effects["login/login"]}})),re((oe=function(e){Object(m["a"])(a,e);var t=ue(a);function a(e){var n;Object(l["a"])(this,a),n=t.call(this,e),n.state={type:"account",autoLogin:!0},n.handleChangeCaptChaSrc=function(){var e=n.props.dispatch;e({type:"global/changeCaptChaSrc"})},n.setAutoLogin=function(e){n.setState({autoLogin:e.target.checked})},n.handleSubmit=function(e){var t=n.state,a=n.props.dispatch;a({type:"login/login",payload:Object(s["a"])({},e,{type:t})}).then((function(e){"fail"===e.result&&a({type:"global/changeCaptChaSrc"})}))},n.LoginMessage=function(e){return f.a.createElement(o["a"],{style:{marginBottom:24},message:e,type:"error",showIcon:!0})};var r=n.props.dispatch;return r({type:"global/getToken"}),n}return Object(i["a"])(a,[{key:"render",value:function(){var e=this.props,t=e.global,a=e.userLogin,o=e.submitting,s=a.status,l=a.type,i=a.message,u=t.captChaSrc,p=this.state,m=p.type,g=p.autoLogin;return f.a.createElement("div",{className:ie.a.main},f.a.createElement(se,{activeKey:m,onSubmit:this.handleSubmit},f.a.createElement(me,{key:"account",tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},"fail"===s&&"fail"===l&&!o&&this.LoginMessage(i||"\u5947\u602a\u7684bug\u589e\u52a0\u4e86,\u8bf7\u8054\u7cfb\u4f5c\u8005QQ:917885215"),f.a.createElement(ge,{name:"username",placeholder:"\u5b66\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b66\u53f7!"}]}),f.a.createElement(fe,{name:"password",placeholder:"\u5bc6\u7801",autoComplete:"false",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]}),f.a.createElement(r["a"].Group,null,f.a.createElement(c["a"],{title:"\u70b9\u51fb\u5207\u6362\u9a8c\u8bc1\u7801",placement:"left"},f.a.createElement("img",{className:ie.a.captcha,onClick:this.handleChangeCaptChaSrc,src:u,alt:"\u9a8c\u8bc1\u7801"})),f.a.createElement(he,{name:"captcha",placeholder:"\u9a8c\u8bc1\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01"}]}))),f.a.createElement("div",null,f.a.createElement(n["a"],{checked:g,onChange:this.setAutoLogin},"\u81ea\u52a8\u767b\u5f55")),f.a.createElement(de,{loading:o},"\u767b\u5f55")))}}]),a}(g["Component"]),ce=oe))||ce);t["default"]=be}}]);